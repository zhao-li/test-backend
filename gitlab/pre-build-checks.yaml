.base:
  &base
  stage: pre-build-checks

unit-test-job:
  <<: *base
  script:
    - PATH="$CI_PROJECT_DIR/.cache/pip/bin/:$PATH"; scripts/test_app.sh
  allow_failure: true

lint-job:
  <<: *base
  script:
    - PATH="$CI_PROJECT_DIR/.cache/pip/bin/:$PATH"; scripts/lint_app.sh

lint-shell-job:
  <<: *base
  image:
    name: koalaman/shellcheck-alpine
    entrypoint: ['']

  script:
    - shellcheck -- *.sh 
        scripts/*.sh \
        scripts/bootstrap/*.sh \
        scripts/setup_app/*.sh

document-job:
  <<: *base
  script:
    - PATH="$CI_PROJECT_DIR/.cache/pip/bin/:$PATH"; scripts/document_app.sh


